<link rel="import" href="../bower_components/paper-input/paper-input.html">
<!-- <link rel="import" href="../bower_components/iron-icon-button/iron-icon-button.html"> -->

<link rel="import" href="../bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="../bower_components/neon-animation/neon-animatable.html">
<link rel="import" href="../bower_components/neon-animation/animations/slide-from-right-animation.html">
<link rel="import" href="../bower_components/neon-animation/animations/slide-right-animation.html">
<link rel="import" href="../bower_components/neon-animation/animations/slide-from-left-animation.html">
<link rel="import" href="../bower_components/neon-animation/animations/slide-left-animation.html">
<link rel="import" href="../bower_components/iron-collapse/iron-collapse.html">

<link rel="import" href="../elements/user-info.html">
<link rel="import" href="../elements/car-info.html">
<link rel="import" href="../elements/trip-info.html">
<link rel="import" href="../elements/container-box.html">
<link rel="import" href="../elements/travel-box.html">
<link rel="import" href="../elements/comment-box.html">
<link rel="import" href="../elements/stars-rating.html">
<link rel="import" href="../elements/car-box.html">

<dom-module name="profile-view">

  <template>


      <user-service id="service" data="{{session.user}}" update="[[update]]" fetch="[[session.user.iduser]]"></user-service>

      <template id="profileTemplate" is="dom-if" if="[[session.user]]">
        <div class="margin-block layout horizontal">
          <div class="layout vertical profile-a">
            <div>
              <img class="profile-photo" src="../images/full-star.png"/>
              <div class="profile-photo-div"></div>
            </div>
            <template is="dom-if" if="[[showKarma()]]">
              <div class="profile-stars"><stars-rating score="[[session.user.karma]]"></stars-rating></div>
            </template>
          </div>
          <div class="layout vertical profile-b">
            <div class="profile-name"><span>[[session.user.name]]</span> <span>[[session.user.surnames]]</span></div>
            <div class="profile-age"><span>XX</span> a√±os</div>
            <template is="dom-if" if="[[edit]]">
              <span>Email</span>
              <span>telefono</span>
              <span>password</span>
              <span>password 2</span>
              <div class="layout horizontal center-justified">
              <button>si</button>
                <span>Carner de conducir</span>
              </div>
            </template>
          </div>
          <div class="profile-c layout self-end profile-buttons">

            <template is="dom-if" if="[[!edit]]">
              <button class="primary-button">Crear viaje</button>
              <div class="space"></div>
              <button class="secondary-button" on-click="editProfile">Editar perfil</button>
            </template>

            <template is="dom-if" if="[[edit]]">
              <button class="primary-button">Guardar cambios</button>
              <div class="space"></div>
              <button class="secondary-button" on-click="cancelEdit">Cancelar</button>
            </template>

          </div>
        </div>

        <template is="dom-if" if="[[!edit]]">
            <container-box name="Viajes">
              <travel-box departure="Granada" arrival="Dogo" day="23" month="Junio" driver="Carmen" travelurl="/"></travel-box>
              <car-box model="Renault" idcar="3212ED" seats="3" hp="200"></car-box>
            </container-box>
            
            <container-box name="Opiniones">
              <comment-box image="../images/driverIcon.jpg" profileurl="/" score="5" comment="Me ha parecido un chaval agradable y simpatico."></comment-box>
            </container-box>
        </template>
      </template>

      <template is="dom-if" if="[[!session.user]]">
	      <p>Please, log-in</p>
      </template>
  </template>

  <script>
    Polymer({
      is: "profile-view",
      properties: {
      	session: {
      	  type: Object,
      	  notify: true
      	},
      	selected: {
      	  type: String,
      	  value: "main"
      	},
        edit: {
          type: Boolean,
          value: false
        }
      },
      editProfile: function() {
        this.edit = true;
      },
      cancelEdit: function() {
        this.edit = false;
      },
      saveProfile: function() {

      },
      showKarma: function() {
        return !this.edit && this.session.user.karma != null;
      }
    });
  </script>
</dom-module>


<!--<script>
  var template = document.querySelector('template[id="profileTemplate"]');
  
  template.addEventListener('polymer-ready', function() {
    console.log("LAKIJSDASD");
    this.injectBoundHTML('<user-info selectedUser="{{session.id}}" selected="{{selected}}"></user-info>', document.querySelector("article"));
  });
  
  template.addEventListener('Polymer-ready', function() {
    console.log("AQUI NO LLEGA");
    var pages = this.$.profilePages;//querySelector("#tripPages");
    
    pages.querySelector("car-info").addEventListener("back-to-user", function(event, detail, sender) {
      pages.setAttribute("selected", "info");
    });
    
    pages.querySelector("user-info").addEventListener("create-car", function(event, detail, sender) {
      pages.setAttribute("selected", "cars");
    });
  });
</script>-->



<!--<script>
  var template = document.querySelector('template[id="profileTemplate"]');
//   template.model.selected = "cars";
  template.addEventListener('template-bound', function() {
//     var pages = this.$.profilePages;
//     
//     pages.querySelector("user-info").addEventListener("selected-selected", function(event, detail, sender) {
//       pages.setAttribute("selected", "{{selected}}");
//     });
  });



//   console.log("{{loged}}");
//   var template = document.querySelector('template[id="profileTemplate"]');
  
//   template.addEventListener('template-bound', function() {
//     this.appendChild("{{loged}}");
//   });
  
//   template.model.loged = "{{loged}}";
  
</script>-->

