<link rel="import" href="../elements/stars-rating.html">

<dom-module name="trip-card">
  
  <style>

    /*:host {
      display: block;
      position: relative;
      background-color: white;
      padding: 20px;
      width: 100%;
      font-size: 1.2rem;
      font-weight: 300;
    }
    .card-header {
      margin-bottom: 10px;
    }
    polyfill-next-selector { content: '.card-header h2'; }
    .card-header ::content h2 {
      margin: 0;
      font-size: 1.5rem;
      font-weight: bold;
    }
    polyfill-next-selector { content: '.card-header h3'; }
    .card-header ::content h3 {
      margin: 0;
      font-size: 1.2rem;
      font-weight: bolder;
    }
    polyfill-next-selector { content: '.card-header img'; }
    .card-header ::content img {
      width: 70px;
      border-radius: 50%;
      margin: 10px;
    }
    :host([selected]) paper-icon-button {
      color: #da4336;
    }*/
    .trip-card-div {
      border: 1px solid #ccc;
      margin: 10px;
    }
    .trip-card-img {
      width: 70px;
      height: 70px;
    }

    .trip-card-seat {
      width: 20px;
      height: 20px;
    }
    .trip-card-options {
      width: 40%;
      margin: 5%;
    }
    .trip-card-1 {
      width: 20%;
      margin: 10px;
      text-align: center;
    }
    .trip-card-2 {
      width: 60%;
      margin: 10px;
    }
    .trip-card-3 {
      width: 20%;
      margin: 10px;
      text-align: center;
    }
  </style>
  
  <template>
    <div class="trip-card-div layout horizontal">
      <div class="layout vertical center trip-card-1">
        <img src="[[imguser]]" class="trip-card-img">
        <stars-rating score="[[score]]"></stars-rating>
        <a href="[[userurl]]">[[username]]</a>
      </div>

      <div class="horizontal-separator"></div>

      <div class="layout vertical trip-card-2">
        <div>
          <span>[[start]]</span><span> - </span>
          <template is="dom-if" if="[[departure]]">
            <span>[[departure]]</span><span> - </span>
          </template>
          <span>[[arrival]]</span>
        </div>
        <div class="layout horizontal center">
          <div class="layout vertical center">
            <span>[[day]]</span>
            <span>[[month]]</span>
          </div>
          <div>
            <span>[[hour]]</span>
          </div>
        </div>
        <div>
          <img class="trip-card-seat" src="../images/seat-icon.png">
          <span>[[seats]]</span><span> plazas libres</span>
        </div>
      </div>

      <div class="trip-card-3">
        <div><span>[[price]]</span>â‚¬</div>
        <span>por persona</span>
        <div class="layout horizontal center">
          <img class="trip-card-options" src="[[petf(pets)]]">
          <img class="trip-card-options" src="[[packagef(packages)]]">
        </div>
        <button>Ver</button>
      </div>
    </div>
    

    <!-- <div class="card-header layout horizontal center">

      <div class="layout vertical">
        <content select="img"></content>
        <div class="layout horizontal">
          <paper-icon-button icon="social:person-outline" on-tap=""></paper-icon-button>
          <content select="free"></content>
          <paper-icon-button icon="maps:local-shipping" on-tap="test" hidden$="{{!packages}}"></paper-icon-button>
        </div>
      </div>
      <div class="layout vertical">
      	<content select="h2"></content>
      	<content select="h3"></content>
      	<content></content>  
      </div>

      <paper-icon-button
        id="more"
        icon="more-horiz"
        on-tap="selectedTapped"
        class="right">
      </paper-icon-button>

    </div> -->
  </template>
  <script>
  //TODO instead of getting the trip per attribute bind the full trip
  Polymer({
    is: "trip-card",
    properties: {
      url: String,
      imguser: String,
      username: String,
      userurl: String,
      score: Number,
      start: String,
      departure: String,
      arrival: String,
      day: String,
      month: String,
      hour: String,
      seats: Number,
      price: Number,
      pets: String,
      packages: String
    },
    petf: function(trip) {
      // var img;
      // var pet = trip.animals;
      
      // // if(pet) img = "allow";
      // // else if (pet === null) img = "unknown";
      // // else img = "deny";

      // console.log("PET: " + pet);
      // return window.Polymer.image.URL + "pet-" + (pet ? "allow" : ((pet == false || pet == 0) ? "deny" : "unknown")) + ".png";
      return window.Polymer.image.URL + "pet-" + trip + ".png";
    },
    packagef: function(trip) {
      // var pck = trip.packages;

      // return window.Polymer.image.URL + "package-" + (pck ? "allow" : ((pck == false || pck == 0) ? "deny" : "unknown")) + ".png";
      return window.Polymer.image.URL + "package-" + trip + ".png";
    }
//     publish: {
//       selected: {
//         value: "",
//         reflect: true
//       }
//     },
//     selectedTapped: function(event, detail, sender) {
// //       document.write("TRIP-CARD");
// //       this.selected = "Seleccionado";
//       this.selected = this.tripid;
//       console.log("CHANGED SELECTED TRIP TO: " + this.tripid);
//       this.fire('selected-tap');
//     },
//     test: function() {
//       console.log(this.packages);
//     }
  });
  </script>
</dom-module>