<!-- <link rel="import" href="../bower_components/polymer/polymer.html"> -->
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="service-behavior.html">

<dom-module name="package-service">
  <style>
    :host {
      display: none;
    }
  </style>
  
  <template>
    <iron-ajax id="loadAll"
      params="[[filters]]"
      last-response="{{data}}"
      on-response="packagesLoaded">
    </iron-ajax>

    <iron-ajax id="loadOne"
    	last-response="{{data}}"
      on-response="packageLoaded">
    </iron-ajax>
    
    <iron-ajax id="create"
      body="{{update}}"
      last-response="{{data}}"
      on-response="createdResponse"
      content-type="application/json"
      method="POST">
    </iron-ajax>
    
  </template>
  <script>
    Polymer({
      is: "package-service",
      hostAttributes: {
      	type: "packages"
      }
      // properties: {
      //   data: {
      //     type: Object,
      //     notify: true
      //   },
      //   fetch: String,
      //   user: Number,
      //   update: Object,
      //   filters: Object
      // },
      
      // ready: function() {
      //   console.log("package-service ready! for: " + this.fetch);
      //   // this._ready = true;
      // },

      // // userChanged: function() {
      // //   this.reload();
      // // },
      
      // packagesLoaded: function() {
      //   console.log('packages loaded:');

      //   this.fire('loaded', this.data);
      // },
      
      // packageLoaded: function() {
      //   console.log('package Loaded:');

      //   this.fire('loaded', this.data);
      // },
      
      // saveData: function() {
      //   console.log('SAVING package');
      //   this.$.create.url = Teranga.restAPI + "packages";
      //   this.$.create.generateRequest();
      // },
      
      // createdResponse: function() {
      //   // this.response = this.$.create.lastResponse;
      // },

      // reload: function() {
      //   console.log("reloading: " + this.fetch);
      //   if(this.fetch == "all") { 
      //     if(this.user) {
      //       this.$.loadAll.url = Teranga.restAPI + "users/" + this.user + "/packages";
      //     } else this.$.loadAll.url = Teranga.restAPI + "packages";
          
      //     console.log(this.$.loadAll.params);
      //     this.$.loadAll.generateRequest();
      //   } else if(this.fetch !== "") {
      //     console.log("fetching " + this.fetch);
      //     this.$.loadOne.url = Teranga.restAPI + "packages/" + this.fetch;

      //     console.log(this.$.loadOne.url);
      //     this.$.loadOne.generateRequest();
      //   }
      // }
    });
  </script>
</dom-module>
