<link rel="import" href="box-container.html">
<link rel="import" href="trip-service.html">

<dom-module name="trip-container">
  <template>
    <box-container on-reload="reloadTrips" name="Viajes">
      <trip-service user="[[iduser]]" response="{{trips}}" fetch="all"></trip-service>

      <template id="tripsRepeat" is="dom-repeat" items="[[trips]]" as="trip">
        <travel-box departure="[[trip.departure]]" arrival="[[trip.arrival]]" day="[[day(trip.dtime)]]" month="[[month(trip.dtime)]]" driver="[[trip.driving]]" travelurl="/"></travel-box>
      </template>
    </box-container>
  </template>

  <script>
    Polymer({
      is: "trip-container",
      properties: {
        trips: {
          type: Object,
          notify: true
        },
        iduser: Number
      },
      day: function(date) {
        return window.Polymer.day(date);
      },
      month: function(date) {
       return window.Polymer.month(date);
      },
      reloadTrips: function(event) {
        this.$$("trip-service").reload();
        this.$$("#tripsRepeat").render();
      }
    });
  </script>
</dom-module>