<!--TODO modify to create profile-box so when loged-in show profile configurations and such things  -->
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<!-- <link rel="import" href="../bower_components/polymer/polymer.html"> -->
<!-- <link rel="import" href="login-service.html"> -->

<dom-module name="login-box">
  <style>
	  :host {
	  	display: block;
			margin: 0!important;
			padding: 0!important;
	  }
  	.login-button {
  		background: #FF6A1D;
  		margin: 10px;
  		width: 70%;
  	}
  	.login-container {
  		background: #fff;
  		border: 1px solid #ccc;
  		padding: 20px;
  	}
  </style>
  
  <template>
  	<div class="layout vertical center login-container">
  		<paper-input label="Email" always-float-label></paper-input>
  		<paper-input label="ContraseÃ±a" always-float-label></paper-input>
  		<paper-button class="login-button" raised>Iniciar</paper-button>
  	</div>
  </template>
  <script>
		Polymer({
			is: "login-box",
			properties: {
				session: {
					type: Object,
					notify: true
				},
				item: {
					type: Object,
					value: {}
				},
				data: Object
			},

			observers: [
				'sessionUserChanged(session.user)'
			],

			ready: function() {
				console.log("login-box ready: " + this.session.user);
			},
			onClick: function() {
				event.preventDefault();
				event.stopPropagation();
			},
			onExit: function() {
				delete this.data;
				delete this.session.user;
				this.session = {};
			},
			onSubmit: function() {
				console.log("submit");
				event.preventDefault();
				event.stopPropagation();
				this.data = JSON.stringify(this.item);

				this.$$("login-service").auth();
			},
			onRegister: function() {
				event.preventDefault();
				event.stopPropagation();

				this.data = JSON.stringify(this.item);
				this.$$("login-service").register();
			},
			sessionUserChanged: function() {
				if(!this.session) this.session = {};
			}
		});
  </script>
</dom-module>
