<link rel="import" href="container-behavior.html">
<link rel="import" href="generic-container.html">
<link rel="import" href="generic-collapse-container.html">

<link rel="import" href="car-box.html">
<link rel="import" href="car-edit.html">

<!-- <link rel="import" href="data-service.html"> -->
<link rel="import" href="pop-up.html">

<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../bower_components/paper-toast/paper-toast.html">

<dom-module name="car-container">
  <template>

    <template is="dom-if" if="[[collapse]]">
      <generic-collapse-container>
        <car-content id="content" iduser="[[iduser]]" data="[[data]]" selected="{{selected}}" load loading="{{loading}}"></car-content>
      </generic-collapse-container>
    </template>

    <template is="dom-if" if="[[!collapse]]">
      <generic-container>
        <car-content id="content" iduser="[[iduser]]" data="[[data]]" selected="{{selected}}" load loading="{{loading}}"></car-content>
      </generic-container>
    </template>

    <template is="dom-if" if="[[allowNew]]">
      <car-box newcar="true" on-click="create"></car-box>
    </template>

    <paper-dialog id="dialog" with-backdrop>
      <car-edit id="edit" iduser="[[iduser]]" on-created="onCreated" on-edited="onEdited" on-discard="closePopup"></car-edit>
    <paper-dialog>

    <paper-toast id="created" text="Coche creado."></paper-toast>
    <paper-toast id="edited" text="Coche editado."></paper-toast>
  </template>

  <script>
    Polymer({
      is: "car-container",

      behaviors: [Teranga.ContainerBehavior],
    });
  </script>
</dom-module>